/*! ithoughts-wordpress-plugin-toolbox build on 2017-12-15 05:27:39 for v5.0.0 */
/**
 * @file Simple AJAX Form
 * @description jQuery extension to make forms AJAX enabled. Mainly used in WordPress projects
 *
 * @author Gerkin, tcbarrett
 * @copyright 2016
 * @license https://www.gnu.org/licenses/gpl-3.0.html GPLv3
 * @package iThoughts-toolbox
 *
 */
"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};!function(a){var b=a.$,c=a.isNA;b.fn.extend({simpleAjaxForm:function(d){var e={validate:!1},f=b.extend(e,d);this.each(function(){var d=b(this),e=b.extend({target:d.data("target"),callback:d.data("callback")},f);e.target&&b("#"+e.target).length&&b("#"+e.target).html("").hide(),d.find('button[name="actionB"]').click(function(){d.find('[name="action"]').val(this.value)});var g,h=this.getAttribute("post_text")?this.getAttribute("post_text"):"Updating, please wait...";d.ajaxForm({beforeSubmit:function(){return!(f.validate&&!jqForm.valid())&&(e.target&&b("#"+e.target).length&&b("#"+e.target).html("<p>"+h+"</p>").removeClass().addClass("clear updating").fadeTo(100,1),g=a.makeLoader(),!0)},error:function(a){g.remove(),e.target&&b("#"+e.target).removeClass().addClass("clear notice notice-error").html("<p>Form submission failed.</p>"),"function"==typeof e.error&&e.error(a)},success:function(a,f,h,i){g.remove(),void 0===i&&(i=h);try{var j=void 0;if("String"===a.constructor.name)j=JSON.parse(a);else{if("Object"!==a.constructor.name)throw"Unhandled type "+(void 0===a?"undefined":_typeof(a));j=a}if("0"!==j&&j){if(void 0!==j.success&&null!=j.success&&void 0!==j.data&&null!=j.data&&(j.data.valid=j.success,j=j.data),j.nonce_refresh&&d.find('[name="_wpnonce"]').val(j.nonce_refresh),j.valid){if(j.reload){var k=void 0;k=window.location.href.includes("?")?"&":"?",j.hasOwnProperty("text")&&!c(j.text)&&(k+="json-res-txt="+encodeURI(j.text)),window.location.href+=k}e.target&&b("#"+e.target).length&&b("#"+e.target).removeClass().addClass("clear notice notice-success").html(j.text),j.redirect&&(j.text?setTimeout(function(){window.location.href=j.redirect},2500):window.location.href=j.redirect)}else e.target&&b("#"+e.target).length&&b("#"+e.target).removeClass().addClass("clear notice notice-error").html(j.text);try{"function"==typeof d[0].simple_ajax_callback&&d[0].simple_ajax_callback(j),"function"==typeof e.callback&&e.callback(j)}catch(a){b("#"+e.target).removeClass().addClass("clear notice notice-error").html("<p>Error with received data</p>"),"function"==typeof e.error&&e.error(a)}}else{var l="Server did not respond anything";b("#"+e.target).removeClass().addClass("clear notice notice-warning").html("<p>"+l+"</p>"),"function"==typeof e.error&&e.error(new Error(l))}}catch(a){b("#"+e.target).removeClass().addClass("clear notice notice-error").html("<p>Invalid server response</p>"),"function"==typeof e.error&&e.error(a)}}})})}}),a.$d.ready(function(){b(".simpleajaxform").simpleAjaxForm()})}(iThoughts.v5);
//# sourceMappingURL=simple-ajax-form-v5.min.js.map/**/