/*! ithoughts-wordpress-plugin-toolbox build on 2018-01-10 01:47:58 for v5.0.0 */
!function(e,t){if("function"==typeof define&&define.amd)define(["ithoughts-core"],t);else if("undefined"!=typeof exports)t(require("ithoughts-core"));else{t(e.ithoughtsCore),e.simpleAjaxForm={}}}(this,function(e){"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=e.w,o=e.$,a=e.$d,n=e.isNA,i=e.makeLoader,c={validate:!1};o.fn.extend({simpleAjaxForm:function(e){var a=o.extend(c,e);this.each(function(){var e=o(this),c=o.extend({target:e.data("target"),callback:e.data("callback")},a);c.target&&o("#"+c.target).length&&o("#"+c.target).html("").hide(),e.find('button[name="actionB"]').click(function(){e.find('[name="action"]').val(this.value)});var s=this.getAttribute("post_text")?this.getAttribute("post_text"):"Updating, please wait...",l=void 0;e.ajaxForm({beforeSubmit:function(){return!(a.validate&&!jqForm.valid())&&(c.target&&o("#"+c.target).length&&o("#"+c.target).html("<p>"+s+"</p>").removeClass().addClass("clear updating").fadeTo(100,1),l=i(),!0)},error:function(e){l.remove(),c.target&&o("#"+c.target).removeClass().addClass("clear notice notice-error").html("<p>Form submission failed.</p>"),"function"==typeof c.error&&c.error(e)},success:function(a,i,s,d){l.remove(),void 0===d&&(d=s);try{var f=void 0;if("String"===a.constructor.name)f=JSON.parse(a);else{if("Object"!==a.constructor.name)throw"Unhandled type "+(void 0===a?"undefined":t(a));f=a}if("0"!==f&&f){if(void 0!==f.success&&null!=f.success&&void 0!==f.data&&null!=f.data&&(f.data.valid=f.success,f=f.data),f.nonce_refresh&&e.find('[name="_wpnonce"]').val(f.nonce_refresh),f.valid){if(f.reload){var u=void 0;u=r.location.href.includes("?")?"&":"?",f.hasOwnProperty("text")&&!n(f.text)&&(u+="json-res-txt="+encodeURI(f.text)),r.location.href+=u}c.target&&o("#"+c.target).length&&o("#"+c.target).removeClass().addClass("clear notice notice-success").html(f.text),f.redirect&&(f.text?setTimeout(function(){r.location.href=f.redirect},2500):r.location.href=f.redirect)}else c.target&&o("#"+c.target).length&&o("#"+c.target).removeClass().addClass("clear notice notice-error").html(f.text);try{"function"==typeof e[0].simple_ajax_callback&&e[0].simple_ajax_callback(f),"function"==typeof c.callback&&c.callback(f)}catch(e){o("#"+c.target).removeClass().addClass("clear notice notice-error").html("<p>Error with received data</p>"),"function"==typeof c.error&&c.error(e)}}else{var m="Server did not respond anything";o("#"+c.target).removeClass().addClass("clear notice notice-warning").html("<p>"+m+"</p>"),"function"==typeof c.error&&c.error(new Error(m))}}catch(e){o("#"+c.target).removeClass().addClass("clear notice notice-error").html("<p>Invalid server response</p>"),"function"==typeof c.error&&c.error(e)}}})})}}),a.ready(function(){o(".simpleajaxform").simpleAjaxForm()})});
//# sourceMappingURL=simple-ajax-form.min.js.map/**/